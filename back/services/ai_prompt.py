def build_cards_prompt(text: str, max_cards: int = 10) -> str:
    return f"""
ВНИМАНИЕ — ПРОЧИТАЙ ВНИМАТЕЛЬНО:
Ты — помощник, который создаёт учебные флеш-карточки строго по тексту.

ПРАВИЛО ЯЗЫКА:
- НЕ переводить текст. Никогда не менять язык.
- Определи язык автоматически.

ЗАДАЧА:
- Создай до {max_cards} карточек.
- Каждая карточка должна содержать:
  "q": короткий и понятный вопрос,
  "a": ёмкий ответ (1–3 коротких предложений).
- Используй ТОЛЬКО информацию из текста.
- Никаких домыслов.

ФОРМАТ ОТВЕТА:
Верни ТОЛЬКО JSON:
{{
  "cards": [
    {{ "q": "вопрос 1", "a": "ответ 1" }},
    {{ "q": "вопрос 2", "a": "ответ 2" }}
  ]
}}

ТЕКСТ ДЛЯ АНАЛИЗА:
\"\"\"{text[:1700]}\"\"\"
"""